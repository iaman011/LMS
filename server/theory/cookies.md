ЁЯНк Cookie рдХреНрдпрд╛ рд╣реИ?
Cookie рдПрдХ рдЫреЛрдЯреА рд╕реА information рд╣реЛрддреА рд╣реИ, рдЬрд┐рд╕реЗ server рдпреВрдЬрд╝рд░ рдХреЗ browser рдореЗрдВ store рдХрд░ рджреЗрддрд╛ рд╣реИред
рдЬрдм рднреА рдпреВрдЬрд╝рд░ рдЙрд╕реА рд╡реЗрдмрд╕рд╛рдЗрдЯ рдкрд░ рджреЛрдмрд╛рд░рд╛ рдЖрддрд╛ рд╣реИ рдпрд╛ request рдХрд░рддрд╛ рд╣реИ, рддреЛ рдпреЗ cookie server рдХреЗ рдкрд╛рд╕ рднреЗрдЬреА рдЬрд╛рддреА рд╣реИред

ЁЯУМ Agenda / рдордХрд╝рд╕рдж рдХреНрдпрд╛ рд╣реИ Cookies рдХрд╛?
тЬЕ 1я╕ПтГг рдпреВрдЬрд╝рд░ рдХреЛ рдкрд╣рдЪрд╛рдирдирд╛ (User Identification)
рдЬрдм рдХреЛрдИ рдпреВрдЬрд╝рд░ login рдХрд░рддрд╛ рд╣реИ рдпрд╛ рдХреЛрдИ setting select рдХрд░рддрд╛ рд╣реИ,
рддреЛ рдЙрд╕рдХреА рдЬрд╛рдирдХрд╛рд░реА browser рдореЗрдВ cookie рдореЗрдВ store рдХрд░ рд▓реА рдЬрд╛рддреА рд╣реИред
рддрд╛рдХрд┐ рдЕрдЧрд▓реА рдмрд╛рд░ рд╡рд╣реА рдпреВрдЬрд╝рд░ рдлрд┐рд░ рд╕реЗ рдЖрдП рддреЛ рдЙрд╕реЗ рджреЛрдмрд╛рд░рд╛ login рдпрд╛ setting reset рдирд╛ рдХрд░рдиреА рдкрдбрд╝реЗред

рдЙрджрд╛рд╣рд░рдг:
рддреБрдордиреЗ Amazon рдкрд░ login рдХрд┐рдпрд╛ тАФ рдФрд░ 7 рджрд┐рди рдмрд╛рдж рд╡рд╛рдкрд╕ рдЖрдХрд░ рджреЗрдЦрд╛ рддреЛ рддреБрдо login рд╣реА рд░рд╣рддреЗ рд╣реЛред
рдпреЗ cookie рдХреЗ рдЬрд╝рд░рд┐рдП possible рд╣реИред

тЬЕ 2я╕ПтГг Session Management
Cookie рдХреЛ session management рдХреЗ рд▓рд┐рдП рднреА use рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
рдЬреИрд╕реЗ:

Login session track рдХрд░рдирд╛

Cart рдореЗрдВ рд░рдЦреЗ product рдпрд╛рдж рд░рдЦрдирд╛

рдХреМрди-рд╕реА language select рдХреА рд╣реИ, рд╡реЛ рд░рдЦрдирд╛

Example:
рддреБрдордиреЗ Myntra рдкрд░ рдХреЛрдИ 4 item cart рдореЗрдВ рдбрд╛рд▓реЗред Browser рдмрдВрдж рдХрд┐рдпрд╛ рдФрд░ рдЕрдЧрд▓реЗ рджрд┐рди рдЦреЛрд▓рд╛ тАФ рддреЛ cart рд╡рд╣реА рд╣реЛрдЧрд╛ред рдХреНрдпреЛрдВрдХрд┐ cookie рдиреЗ remember рдХрд┐рдпрд╛ред

тЬЕ 3я╕ПтГг Security Purpose (httpOnly, secure cookies)
httpOnly cookie рдХрд╛ рдордХрд╝рд╕рдж рд╣реИ рдХрд┐ cookie рдХреЛ browser рдХреЗ JavaScript рд╕реЗ access рдирд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред
рдЗрд╕рд╕реЗ hacker XSS (Cross Site Scripting) рд╕реЗ cookie рдЪреБрд░рд╛рдиреЗ рдореЗрдВ fail рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред

secure cookie рд╕рд┐рд░реНрдл HTTPS рдкрд░ рднреЗрдЬреА рдЬрд╛рддреА рд╣реИ тАФ HTTP рдкрд░ рдирд╣реАрдВред
рдЗрд╕рд╕реЗ data sniffing рдФрд░ middleman attack рд╕реЗ рдмрдЪрд╛рд╡ рд╣реЛрддрд╛ рд╣реИред

тЬЕ 4я╕ПтГг Preferences рдФрд░ Tracking
Cookies рдпреВрдЬрд╝рд░ рдХреА preferences (рдЬреИрд╕реЗ theme, language) рдХреЛ remember рд░рдЦрддреА рд╣реИрдВред
рд╕рд╛рде рд╣реА рдХреБрдЫ sites (рдЬреИрд╕реЗ Google Ads) рдпреВрдЬрд╝рд░ рдХреА activity track рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП cookies рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░рддреА рд╣реИрдВред

******************************************************

ЁЯУЬ рдХреЛрдб:

usercontroller.js

// Cookie рдХреЗ рд▓рд┐рдП рдХреБрдЫ options рдмрдирд╛ рд░рд╣реЗ рд╣реИрдВ
const cookieOptions = {
    secure: true,              // рдпреЗ option рдХрд╣рддрд╛ рд╣реИ рдХрд┐ cookie рд╕рд┐рд░реНрдл HTTPS connection рдкрд░ рд╣реА рднреЗрдЬреА рдЬрд╛рдПрдЧреА (HTTP рдкрд░ рдирд╣реАрдВ)
    maxAge: 7*24*60*60*1000,   // рдпреЗ cookie рдХреА expiry time рд╣реИ тАФ 7 рджрд┐рди рдХреЗ рдмрд╛рдж cookie expire рд╣реЛ рдЬрд╛рдПрдЧреА (рдорд┐рд▓рд┐рд╕реЗрдХрдВрдб рдореЗрдВ)
    httpOnly: true             // рдпреЗ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ cookie client-side JavaScript (рдЬреИрд╕реЗ browser console) рд╕реЗ access рдирд╣реАрдВ рдХреА рдЬрд╛ рд╕рдХрддреА
}

// рдЕрдм response рдореЗрдВ cookie set рдХрд░ рд░рд╣реЗ рд╣реИрдВ
res.cookie('token', token, cookieOptions);
ЁЯУЦ рдкреВрд░реА рдХрд╣рд╛рдиреА (Story in Hindi)
рдЬрдм рдХреЛрдИ рдпреВрдЬрд╝рд░ login рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╣рдо рдЙрд╕реЗ JWT token рджреЗрддреЗ рд╣реИрдВ,
рддреЛ рдЙрд╕ token рдХреЛ рд╣рдо рд╕реАрдзреЗ browser рдореЗрдВ store рдирд╣реАрдВ рдХрд░рддреЗ, рдмрд▓реНрдХрд┐ secure рддрд░реАрдХреЗ рд╕реЗ browser рдХреА cookie рдореЗрдВ рдбрд╛рд▓рддреЗ рд╣реИрдВред

рдХреНрдпреЛрдВ?
ЁЯСЙ рдХреНрдпреЛрдВрдХрд┐ cookie automatically рд╣рд░ request рдХреЗ рд╕рд╛рде server рдХреЛ рдЬрд╛рддреА рд╣реИред
ЁЯСЙ рдФрд░ cookie рдореЗрдВ рд░рдЦреА рдЪреАрдЬрд╝реЗрдВ рдЬреНрдпрд╛рджрд╛ control рдореЗрдВ рд╣реЛрддреА рд╣реИрдВ (session management, security control)ред

рдЕрдм cookie рдХреЛ set рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП express рдХрд╛ res.cookie() method рд╣реЛрддрд╛ рд╣реИ:

javascript
Copy
Edit
res.cookie('token', token, options)
рдЬрд╣рд╛рдБ:

'token' тЖТ cookie рдХрд╛ рдирд╛рдо

token тЖТ рд╡реЛ actual JWT token рдпрд╛ value

cookieOptions тЖТ cookie рдХреА properties рдФрд░ security settings

ЁЯУМ cookieOptions рдореЗрдВ рдХреНрдпрд╛-рдХреНрдпрд╛ рд╣реИ?
1я╕ПтГг secure: true
рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдпреЗ cookie рд╕рд┐рд░реНрдл HTTPS connection рдкрд░ рд╣реА рднреЗрдЬреА рдЬрд╛рдПрдЧреАред

Localhost (HTTP) рдкрд░ рдирд╣реАрдВ рдЬрд╛рдПрдЧреАред

Production рдореЗрдВ security рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЬрд╝рд░реВрд░реАред

2я╕ПтГг maxAge: 7*24*60*60*1000
рдпреЗ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ cookie рдХрд┐рддрдиреЗ рд╕рдордп рддрдХ valid рд░рд╣реЗрдЧреАред

рдпрд╣рд╛рдБ 7 рджрд┐рди рддрдХ (7 рджрд┐рди ├Ч 24 рдШрдВрдЯреЗ ├Ч 60 рдорд┐рдирдЯ ├Ч 60 рд╕реЗрдХрдВрдб ├Ч 1000 рдорд┐рд▓реАрд╕реЗрдХрдВрдб)

рдпрд╛рдиреА рдпреВрдЬрд╝рд░ 7 рджрд┐рди рддрдХ login рд░рд╣реЗрдЧрд╛, рдЙрд╕рдХреЗ рдмрд╛рдж login рдлрд┐рд░ рд╕реЗ рдХрд░рдирд╛ рдкрдбрд╝реЗрдЧрд╛ред

3я╕ПтГг httpOnly: true
рдпреЗ рд╕рдмрд╕реЗ important рд╣реИред

рдЗрд╕рд╕реЗ cookie client-side JavaScript (browser console, scripts) рд╕реЗ access рдирд╣реАрдВ рдХреА рдЬрд╛ рд╕рдХрддреАред

рдЗрд╕рдХрд╛ рдорддрд▓рдм рдХреЛрдИ XSS (Cross-site scripting attack) рдХрд░рдХреЗ рдЗрд╕ cookie рдХреЛ рдЪреБрд░рд╛ рдирд╣реАрдВ рд╕рдХрддрд╛ред

тЬЕ Final Conclusion:
рдЗрд╕ code рдХрд╛ рдордХрд╝рд╕рдж рд╣реИ:

JWT token рдХреЛ safe рдФрд░ secure рддрд░реАрдХреЗ рд╕реЗ client browser рдореЗрдВ рднреЗрдЬрдирд╛

рдЬрд┐рд╕рд╕реЗ рд╣рд░ request рдХреЗ рд╕рд╛рде рд╡реЛ server рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рдП

рдФрд░ рд╡реЛ cookie browser JS рд╕реЗ access рдирд╛ рд╣реЛ рдкрд╛рдП рдФрд░ рд╕рд┐рд░реНрдл HTTPS рдкрд░ рднреЗрдЬреА рдЬрд╛рдП